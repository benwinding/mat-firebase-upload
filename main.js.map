{"version":3,"sources":["../mat-firebase-upload/src/lib/firebase/uploads-manager.ts","../mat-firebase-upload/src/lib/form-base-class.ts","../mat-firebase-upload/src/lib/form-controls/form-firebase-file.component.ts","../mat-firebase-upload/src/lib/form-controls/form-firebase-files.component.ts","../mat-firebase-upload/src/lib/form-controls/form-firebase-image.component.ts","../mat-firebase-upload/src/lib/lib.module.ts","../mat-firebase-upload/src/lib/subcomponents/form-file-uploader-list.component.ts","../mat-firebase-upload/src/lib/subcomponents/form-firebase-files-viewer.component.ts","../mat-firebase-upload/src/lib/subcomponents/preview-images/components/img-with-loader.component.ts","../mat-firebase-upload/src/lib/subcomponents/preview-images/components/preview-gallery.component.ts","../mat-firebase-upload/src/lib/subcomponents/preview-images/components/preview-image-popup.component.ts","../mat-firebase-upload/src/lib/subcomponents/preview-images/components/preview-image.component.ts","../mat-firebase-upload/src/lib/subcomponents/preview-images/lib-preview-images.module.ts","../mat-firebase-upload/src/lib/utils/case-helper.ts","../mat-firebase-upload/src/lib/utils/file-icon.helper.ts","../mat-firebase-upload/src/lib/utils/img-helpers.ts","../mat-firebase-upload/src/lib/utils/index.ts","../mat-firebase-upload/src/lib/utils/notification.service.ts","../mat-firebase-upload/src/lib/utils/path-helpers.ts","../mat-firebase-upload/src/lib/utils/simple-logger.ts","../mat-firebase-upload/src/material-imports.ts","../mat-firebase-upload/src/public-api.ts","./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/components/file-factory.ts","./src/app/components/index.ts","./src/app/components/test-form-file.component.ts","./src/app/components/test-form-files.component.ts","./src/app/components/test-form-image.component.ts","./src/app/components/test-form-viewers.component.ts","./src/app/from-lib.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { timer, Subject, BehaviorSubject, Observable } from 'rxjs';\nimport { takeUntil, take, tap } from 'rxjs/operators';\nimport * as firebase from 'firebase/app';\nimport 'firebase/storage';\nimport { FormFirebaseConfigurationBase } from '../FormFirebaseFileConfiguration';\nimport { FormFileObject } from '../FormFileObject';\nimport {\n  NotificationService,\n  TrimSlashes,\n  blobToDataURL,\n  downscaleImage,\n  dataURItoBlob,\n  isFileImage,\n  getFileIcon\n} from '../utils';\nimport { EventEmitter } from '@angular/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport { SimpleLogger } from '../utils/simple-logger';\n\nexport interface IUploadsManager {\n  $currentFiles: Observable<FormFileObject[]>;\n  onDestroy();\n  clickRemoveTag(fileObject: FormFileObject): Promise<void>;\n  onFileInputChange(event);\n}\n\nexport class UploadsManager implements IUploadsManager {\n  public $currentFiles = new BehaviorSubject<FormFileObject[]>(null);\n\n  private trackedFiles: FormFileObject[] = [];\n\n  private storage: firebase.storage.Storage;\n  private destroyed = new Subject();\n\n  constructor(\n    private config: FormFirebaseConfigurationBase,\n    private ns: NotificationService,\n    private uploadStatusChanged: EventEmitter<boolean>,\n    $incomingChanges: Observable<FormFileObject[]>,\n    initialFiles: FormFileObject[],\n    private logger: SimpleLogger\n  ) {\n    this.initFirebase();\n\n    this.updatesFromInternal(initialFiles, true);\n    // Update tracked files from form changes\n    $incomingChanges\n      .pipe(\n        takeUntil(this.destroyed),\n        tap(files => this.updatesFromExternal(files)),\n      )\n      .subscribe();\n  }\n\n  public onDestroy() {\n    this.destroyed.next();\n  }\n\n  private updatesFromExternal(files: FormFileObject[]) {\n    this.logger.log('um: updatesFromExternal', { files });\n    this.trackedFiles = files;\n  }\n\n  private updatesFromInternal(files: FormFileObject[], sendUpdate?: boolean) {\n    this.logger.log('um: updatesFromInternal', { files });\n    if (!Array.isArray(files)) {\n      this.trackedFiles = [];\n      return;\n    }\n    this.trackedFiles = files;\n    if (sendUpdate) {\n      this.$currentFiles.next(this.trackedFiles);\n    }\n  }\n\n  initFirebase() {\n    const app = this.getFirebaseApp(this.config);\n    if (!app) {\n      return;\n    }\n    this.storage = app.storage(this.currentBucketName());\n    timer(0, 1000)\n      .pipe(takeUntil(this.destroyed))\n      .subscribe(() => {\n        this.checkAllUploadsAreDone();\n      });\n  }\n\n  private getFirebaseApp(\n    config: FormFirebaseConfigurationBase\n  ): firebase.app.App {\n    if (config.firebaseApp) {\n      return config.firebaseApp;\n    }\n    if (!config.firebaseConfig) {\n      return null;\n    }\n    const firebaseConfig = this.config.firebaseConfig;\n    if (firebase.apps.length) {\n      return firebase.apps[0];\n    } else {\n      return firebase.initializeApp(firebaseConfig);\n    }\n  }\n\n  private checkAllUploadsAreDone() {\n    const currentFiles = this.getCurrentFiles();\n    const completeArray = currentFiles\n      .filter(f => !!f.value)\n      .filter(f => !!f.value.props)\n      .map(f => f.value.props.completed);\n\n    const haveAllFilesComplete = completeArray.reduce(\n      (previous, currentComplete) => previous && currentComplete,\n      true\n    );\n    const isStillUploading = !haveAllFilesComplete;\n    this.uploadStatusChanged.emit(isStillUploading);\n  }\n\n  private currentBucketName() {\n    return (\n      this.config.bucketname ||\n      // tslint:disable-next-line: no-string-literal\n      this.config.firebaseConfig['storageBucket']\n    );\n  }\n\n  public async clickRemoveTag(fileObject: FormFileObject) {\n    const currentFiles = this.getCurrentFiles();\n    const filteredFiles = currentFiles.filter(f => f.id !== fileObject.id);\n    this.logger.log('form-files: clickRemoveTag', { currentFiles, filteredFiles });\n    this.updatesFromInternal(filteredFiles, true);\n    if (!this.config.deleteOnStorage) {\n      return;\n    }\n    if (fileObject.bucket_path) {\n      try {\n        await this.storage.refFromURL(fileObject.bucket_path).delete();\n        this.logger.log('form-files: clickRemoveTag() file deleted from storage', {\n          fileObject\n        });\n      } catch (error) {\n        this.logger.log(\n          'form-files: clickRemoveTag() problem deleting file',\n          error\n        );\n      }\n    }\n  }\n\n  public onFileInputChange(files: File[]) {\n    if (files && files.length) {\n      const filesList = files;\n      const fileArray = Array.from(filesList);\n      fileArray.map((file: File) => this.beginUploadTask(file));\n    }\n  }\n\n  private async beginUploadTask(file: File) {\n    const bucketPath = 'gs://' + this.currentBucketName();\n    let uniqueFileName;\n    if (this.config.useUuidName) {\n      uniqueFileName = uuidv4() + '.' + file.name.split('.').pop();\n    } else {\n      uniqueFileName = file.name;\n    }\n    const originalFileName = file.name;\n    const dir = this.config.directory;\n    const dirPath = `${TrimSlashes(bucketPath)}/${TrimSlashes(dir)}`;\n    const fullPath = `${TrimSlashes(dirPath)}/${uniqueFileName}`;\n    this.logger.log('beginUploadTask()', { fileData: file, bucketPath, fullPath });\n    let fileParsed;\n    if (file.type.includes('image/')) {\n      fileParsed = await this.parseAndCompress(file);\n    } else {\n      fileParsed = file;\n    }\n    await this.addFile(uniqueFileName, originalFileName, fullPath);\n    const uploadTask = this.storage.refFromURL(fullPath).put(fileParsed);\n    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, {\n      next: snap => this.onNext(snap, fullPath),\n      error: error => this.onError(error),\n      complete: () =>\n        this.onComplete(fullPath, uniqueFileName, originalFileName)\n    });\n\n    this.destroyed.pipe(take(1)).subscribe(() => {\n      uploadTask.cancel();\n    });\n  }\n\n  private addFile(\n    uniqueFileName: string,\n    originalFileName: string,\n    fullPath: string\n  ) {\n    const fileIcon = getFileIcon(originalFileName);\n    const newFile: FormFileObject = {\n      id: uniqueFileName,\n      fileicon: fileIcon,\n      imageurl: null,\n      bucket_path: fullPath,\n      value: {\n        name: originalFileName,\n        props: {\n          thumb: null,\n          fileicon: fileIcon,\n          progress: 0,\n          completed: false\n        }\n      }\n    };\n    const currentFiles = this.getCurrentFiles();\n    currentFiles.push(newFile);\n    this.updatesFromInternal(currentFiles, true);\n  }\n\n  private async parseAndCompress(file): Promise<File> {\n    if (\n      !this.config.imageCompressionMaxSize &&\n      !this.config.imageCompressionQuality\n    ) {\n      return file;\n    }\n    const maxWidth = this.config.imageCompressionMaxSize || 1800;\n    const maxQuality = this.config.imageCompressionQuality || 0.6;\n    const dataURL = await blobToDataURL(file);\n    const newDataURL = await downscaleImage(\n      dataURL,\n      maxWidth,\n      maxQuality,\n      'image/jpeg'\n    );\n    const oldKb = this.getFileSizeKiloBytes(dataURL);\n    const newKb = this.getFileSizeKiloBytes(newDataURL);\n    const fileNew = dataURItoBlob(newDataURL) as File;\n    this.logger.log(`app-tags-files.component: optimized image...\n  --> old=${oldKb} kb\n  --> new=${newKb} kb`);\n    return fileNew;\n  }\n\n  private getFileSizeKiloBytes(dataURL) {\n    const head = 'data:image/*;base64,';\n    const fileSizeBytes = Math.round(((dataURL.length - head.length) * 3) / 4);\n    const fileSizeKiloBytes = (fileSizeBytes / 1024).toFixed(0);\n    return fileSizeKiloBytes;\n  }\n\n  private async onNext(\n    snapshot: firebase.storage.UploadTaskSnapshot,\n    fullPath: string\n  ) {\n    switch (snapshot.state) {\n      case firebase.storage.TaskState.RUNNING: // or 'running'\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        const file = this.getCurrentFiles().find(\n          f => f.bucket_path === fullPath\n        );\n        if (!file) {\n          this.logger.warn('onNext: Cannot find matching file', {\n            fullPath,\n            progress,\n            snapshot\n          });\n          return;\n        }\n        this.logger.log('onNext: Upload is running', {\n          file,\n          fullPath,\n          progress,\n          snapshot\n        });\n        file.value.props.progress = progress;\n        break;\n    }\n  }\n\n  private onError(error) {\n    this.ns.notify(error.message, 'Error Uploading', true);\n    this.logger.error('onError(error)', { error }, error);\n  }\n\n  private async onComplete(fullPath, uniqueFileName, originalFileName) {\n    this.logger.log('onComplete()', {\n      fullPath,\n      uniqueFileName,\n      originalFileName\n    });\n    const ref = this.storage.refFromURL(fullPath);\n    const url = await ref.getDownloadURL();\n    const isImage = isFileImage(originalFileName);\n    const currentFiles = this.getCurrentFiles();\n    const file = currentFiles.find(f => f.id === uniqueFileName);\n    if (!file || !file.value || !file.value.props) {\n      return;\n    }\n    file.id = url;\n    if (isImage) {\n      file.imageurl = url;\n    }\n    file.value.props.completed = true;\n    this.updatesFromInternal(currentFiles, true);\n  }\n\n  getCurrentFiles(): FormFileObject[] {\n    let allFiles = this.trackedFiles;\n    if (!Array.isArray(allFiles)) {\n      allFiles = [];\n    }\n    return allFiles.filter(f => !!f);\n  }\n}\n","import { ControlValueAccessor, FormControl, Validator } from \"@angular/forms\";\nimport { Subject } from \"rxjs\";\nimport { OnDestroy, OnInit, Input } from \"@angular/core\";\nimport { takeUntil, auditTime, take } from \"rxjs/operators\";\nimport { ConvertToTitleCase } from \"./utils/case-helper\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { SimpleLogger } from \"./utils/simple-logger\";\n\nexport class FormBase<T>\n  implements OnInit, OnDestroy, ControlValueAccessor, Validator {\n  internalControl: FormControl = new FormControl();\n  autoCompleteObscureName: string;\n\n  disabled = false;\n  validationError: string;\n\n  _value: T;\n\n  @Input()\n  formControlName: string;\n  @Input()\n  placeholder: string;\n  @Input()\n  debug: boolean;\n\n  logger: SimpleLogger;\n\n  $nginit = new Subject();\n  $ngdestroy = new Subject();\n  _destroyed = new Subject();\n\n  constructor() {\n    this.$nginit.pipe(take(1)).subscribe(() => this._init());\n    this.$ngdestroy.pipe(take(1)).subscribe(() => this._destroy());\n  }\n\n  ngOnInit() {\n    this.$nginit.next();\n  }\n\n  ngOnDestroy() {\n    this.$ngdestroy.next();\n  }\n\n  private _init() {\n    this.logger = new SimpleLogger(this.debug, \"[form-base-class]\");\n    this.autoCompleteObscureName = uuidv4();\n    this.internalControl.valueChanges\n      .pipe(takeUntil(this._destroyed))\n      .pipe(auditTime(100))\n      .subscribe((value) => {\n        this._value = value;\n        this.logger.log(\"internalControl.valueChanges()\", { value });\n        this.onChange(this._value);\n        this.onTouched();\n      });\n\n    if (!this.placeholder) {\n      const nameParsed = ConvertToTitleCase(this.formControlName + \"\");\n      this.placeholder = nameParsed;\n    }\n  }\n\n  private _destroy() {\n    this._destroyed.next();\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(value) {\n    this.logger.log(\"this.set value()\", { value });\n    this._value = value;\n    this.internalControl.setValue(value, { emitEvent: true });\n  }\n\n  writeValue(value: any): void {\n    this.value = value;\n  }\n\n  propagateOnChange: any = () => {};\n  registerOnChange(fn: any): void {\n    this.propagateOnChange = fn;\n  }\n\n  onTouched: any = () => {};\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    setTimeout(() => {\n      if (isDisabled) {\n        this.internalControl.disable();\n      } else {\n        this.internalControl.enable();\n      }\n    });\n  }\n\n  public validate(c: FormControl) {\n    const errors = c.errors;\n    const value = c.value;\n    this.logger.log(\"form-base-class: validate()\", { errors, value });\n    this.internalControl.setValidators(c.validator);\n    return !this.validationError\n      ? null\n      : {\n          validationError: {\n            valid: false,\n          },\n        };\n  }\n\n  private onChange(inputValue) {\n    this.validationError = this.CheckValueIsValid();\n    if (this.validationError) {\n      this.propagateOnChange(this.value);\n    } else {\n      this.propagateOnChange(inputValue);\n    }\n  }\n\n  CheckValueIsValid(): string {\n    return null;\n  }\n}\n","import {\n  Component,\n  forwardRef,\n  Input,\n  Output,\n  EventEmitter,\n} from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from \"@angular/forms\";\nimport { FormFileObject } from \"../FormFileObject\";\nimport { Subject } from \"rxjs\";\nimport { FormBase } from \"../form-base-class\";\nimport { NotificationService } from \"../utils/notification.service\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { UploadsManager } from \"../firebase/uploads-manager\";\nimport { takeUntil, map } from \"rxjs/operators\";\nimport { FormFirebaseFileConfiguration } from \"../FormFirebaseFileConfiguration\";\nimport { PreviewImagePopupComponent } from \"../subcomponents/preview-images/components/preview-image-popup.component\";\nimport { SimpleLogger } from \"../utils/simple-logger\";\n\n@Component({\n  // tslint:disable-next-line: component-selector\n  selector: \"form-firebase-file\",\n  template: `\n    <div class=\"container\">\n      <span class=\"placeholder\">{{ placeholder }}</span>\n      <label\n        class=\"custom-file-upload\"\n        [class.disabled]=\"disabled\"\n        [class.dragover]=\"!disabled && isDraggingOnTop\"\n        (dragover)=\"isDraggingOnTop = true; $event.preventDefault()\"\n        (dragleave)=\"isDraggingOnTop = false\"\n        (drop)=\"isDraggingOnTop = false; onFileDrop($event)\"\n      >\n        <input\n          [hidden]=\"true\"\n          [placeholder]=\"placeholder\"\n          type=\"file\"\n          [disabled]=\"disabled\"\n          (change)=\"onFileInputChange($event)\"\n          [accept]=\"config?.acceptedFiles || 'image/*'\"\n        />\n        <p class=\"upload-message\">\n          {{ uploadMessage }}\n        </p>\n        <i class=\"upload-message\" *ngIf=\"disabled\">\n          (disabled)\n        </i>\n      </label>\n      <div class=\"relative\" *ngIf=\"value?.id\">\n        <lib-uploaded-files-list\n          placeholder=\"Uploaded:\"\n          [disabled]=\"disabled\"\n          [uploadedFiles]=\"[value]\"\n          (clickRemoveTag)=\"this.clickRemoveTag($event)\"\n        >\n        </lib-uploaded-files-list>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .margin10 {\n        margin: 10px;\n      }\n      .relative {\n        position: relative;\n      }\n      .container {\n        display: flex;\n        flex-direction: column;\n        position: relative;\n      }\n      .placeholder {\n        color: grey;\n        margin-bottom: 5px;\n      }\n      .upload-message {\n        font-size: 1.5em;\n        margin-top: 0;\n        margin-bottom: 10px;\n        text-align: center;\n        color: #777;\n        cursor: pointer;\n        display: block;\n      }\n      .remove-btn {\n        position: absolute;\n        right: 5px;\n        top: 5px;\n      }\n      .custom-file-upload {\n        display: inline-block;\n        border: 4px dashed #eee;\n        background: transparent;\n        padding: 50px 0px;\n        cursor: pointer;\n        width: calc(100% - 8px - 20px);\n      }\n      .custom-file-upload.disabled {\n        background: #eee;\n      }\n      .dragover {\n        background: #ddd;\n      }\n      .justify-around {\n        justify-content: space-around;\n      }\n      .flex-h {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n      }\n      .has-pointer {\n        cursor: pointer;\n      }\n      .file-thumb {\n        width: auto;\n        max-height: 250px;\n        max-width: 100%;\n      }\n    `,\n  ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FormFirebaseFileComponent),\n      multi: true,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FormFirebaseFileComponent),\n      multi: true,\n    },\n  ],\n})\nexport class FormFirebaseFileComponent extends FormBase<FormFileObject> {\n  @Input()\n  placeholder = \"Uploaded File\";\n  @Input()\n  uploadMessage = \"Upload a File Here\";\n\n  private _config: FormFirebaseFileConfiguration;\n  @Input()\n  set config(config: FormFirebaseFileConfiguration) {\n    this._config = config || ({} as any);\n    this.initUploadManager();\n  }\n  get config() {\n    return this._config;\n  }\n\n  // tslint:disable-next-line: no-output-on-prefix\n  @Output()\n  uploadStatusChanged = new EventEmitter<boolean>();\n\n  destroyed = new Subject();\n\n  isDraggingOnTop = false;\n\n  hasLoaded = false;\n  hasError = false;\n  private um: UploadsManager;\n\n  constructor(public ns: NotificationService, private dialog: MatDialog) {\n    super();\n    this.$ngdestroy.subscribe(() => this.destroyUploadManager());\n  }\n\n  destroyUploadManager() {\n    this.destroyed.next();\n    if (this.um) {\n      this.um.onDestroy();\n    }\n  }\n\n  initUploadManager() {\n    this.logger = new SimpleLogger(this.debug, \"[form-firebase-file]\");\n    this.destroyUploadManager();\n    const $internalChangesTap = this.internalControl.valueChanges.pipe(\n      takeUntil(this.destroyed),\n      map((file) => [file])\n    );\n    this.um = new UploadsManager(\n      this.config,\n      this.ns,\n      this.uploadStatusChanged,\n      $internalChangesTap,\n      [this.value],\n      this.logger\n    );\n    this.um.$currentFiles.pipe(takeUntil(this.destroyed)).subscribe((vals) => {\n      if (Array.isArray(vals)) {\n        this.value = [...vals].pop();\n      }\n    });\n  }\n\n  writeValue(value) {\n    if (typeof value === \"object\") {\n      this.value = value;\n    } else {\n      this.value = null;\n    }\n  }\n\n  onImageClicked($event, imageurl: string) {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.dialog.open(PreviewImagePopupComponent, {\n      data: imageurl,\n      hasBackdrop: true,\n      disableClose: false,\n    });\n  }\n\n  async clickRemoveTag(fileObject: FormFileObject) {\n    this.value = null;\n    this.hasError = false;\n    this.hasLoaded = false;\n    this.um.clickRemoveTag(fileObject);\n  }\n\n  onFileInputChange(event) {\n    const files = event.target.files;\n    this.hasLoaded = false;\n    this.hasError = false;\n    this.um.onFileInputChange(files);\n  }\n\n  onFileDrop(event) {\n    event.preventDefault();\n    if (this.disabled) {\n      return;\n    }\n    const files = event.dataTransfer.files;\n    this.hasLoaded = false;\n    this.hasError = false;\n    this.um.onFileInputChange(files);\n  }\n}\n","import {\n  Component,\n  forwardRef,\n  Input,\n  Output,\n  EventEmitter,\n} from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from \"@angular/forms\";\nimport { FormFileObject } from \"../FormFileObject\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/storage\";\nimport { Subject, Observable } from \"rxjs\";\nimport { takeUntil, tap } from \"rxjs/operators\";\nimport { FormBase } from \"../form-base-class\";\nimport { NotificationService } from \"../utils/notification.service\";\nimport { UploadsManager } from \"../firebase/uploads-manager\";\nimport { FormFirebaseFilesConfiguration } from \"../FormFirebaseFileConfiguration\";\nimport { SimpleLogger } from \"../utils/simple-logger\";\n\n@Component({\n  // tslint:disable-next-line: component-selector\n  selector: \"form-firebase-files\",\n  template: `\n    <div>\n      <label\n        class=\"custom-file-upload\"\n        [class.dragover]=\"!maxReached && !disabled && isDraggingOnTop\"\n        [class.disabled]=\"disabled\"\n        (dragover)=\"isDraggingOnTop = true; $event.preventDefault()\"\n        (dragleave)=\"isDraggingOnTop = false\"\n        (drop)=\"isDraggingOnTop = false; onFileDrop($event)\"\n      >\n        <input\n          *ngIf=\"isMultiple\"\n          [hidden]=\"true\"\n          type=\"file\"\n          multiple\n          [disabled]=\"disabled || maxReached\"\n          (change)=\"onFileInputChange($event)\"\n          [accept]=\"config.acceptedFiles || '*'\"\n        />\n        <input\n          *ngIf=\"!isMultiple\"\n          [hidden]=\"true\"\n          type=\"file\"\n          [disabled]=\"disabled || maxReached\"\n          (change)=\"onFileInputChange($event)\"\n          [accept]=\"config.acceptedFiles || '*'\"\n        />\n        <div class=\"flex-v\">\n          <span *ngIf=\"isConfigLoaded\">\n            {{ placeholder }}\n          </span>\n          <i *ngIf=\"disabled\">\n            (disabled)\n          </i>\n        </div>\n        <span *ngIf=\"!isConfigLoaded\">\n          [config] is waiting for variable config:\n          FormFirebaseFilesConfiguration to resolve\n        </span>\n        <div class=\"max-files\" *ngIf=\"maxReached && !disabled\">\n          Max Uploaded - Limit of {{ config.maxFiles }} file(s) reached. Remove\n          files to change uploads\n        </div>\n      </label>\n      <lib-uploaded-files-list\n        [disabled]=\"disabled\"\n        [uploadedFiles]=\"this.value\"\n        (clickRemoveTag)=\"this.clickRemoveTag($event)\"\n      >\n      </lib-uploaded-files-list>\n    </div>\n  `,\n  styles: [\n    `\n      .custom-file-upload {\n        border: 4px dashed #eee;\n        display: inline-block;\n        padding: 35px 0px;\n        cursor: pointer;\n        width: calc(100% - 8px);\n        text-align: center;\n        font-size: 1.5em;\n        color: #777;\n      }\n      .custom-file-upload.disabled {\n        background: #eee;\n      }\n      .dragover {\n        background: #ddd;\n      }\n      .max-files {\n        font-size: 0.9em;\n        color: orange;\n        font-style: italic;\n      }\n      .flex-v {\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n      }\n    `,\n  ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FormFirebaseFilesComponent),\n      multi: true,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FormFirebaseFilesComponent),\n      multi: true,\n    },\n  ],\n})\nexport class FormFirebaseFilesComponent extends FormBase<FormFileObject[]> {\n  @Input()\n  placeholder = \"upload here\";\n\n  private _config: FormFirebaseFilesConfiguration;\n  @Input()\n  set config(config: FormFirebaseFilesConfiguration) {\n    this._config = config || ({} as any);\n    this.initUploadManager();\n  }\n  get config() {\n    return this._config;\n  }\n  get isConfigLoaded(): boolean {\n    const c = this.config;\n    return !!c && !!c.directory && (!!c.firebaseApp || !!c.firebaseConfig);\n  }\n  // tslint:disable-next-line: no-output-on-prefix\n  @Output()\n  uploadStatusChanged = new EventEmitter<boolean>();\n\n  destroyed = new Subject();\n  storage: firebase.storage.Storage;\n\n  isDraggingOnTop = false;\n  private um: UploadsManager;\n\n  $formChanges: Observable<FormFileObject[]>;\n\n  constructor(public ns: NotificationService) {\n    super();\n    this.$ngdestroy.subscribe(() => this.destroyUploadManager());\n  }\n\n  writeValue(value) {\n    if (!Array.isArray(value)) {\n      value = [];\n    }\n    this.value = value;\n  }\n\n  destroyUploadManager() {\n    this.destroyed.next();\n    if (this.um) {\n      this.um.onDestroy();\n    }\n  }\n\n  initUploadManager() {\n    this.logger = new SimpleLogger(this.debug, \"[form-firebase-files]\");\n    this.$formChanges = this.internalControl.valueChanges.pipe(\n      tap((values) =>\n        this.logger.log(\"files.valueChanges\", { values, thisValue: this.value })\n      )\n    );\n    this.destroyUploadManager();\n    this.logger.log(\"before new UploadsManager()\", { value: this.value });\n    this.um = new UploadsManager(\n      this.config,\n      this.ns,\n      this.uploadStatusChanged,\n      this.$formChanges,\n      this.value,\n      this.logger\n    );\n    this.um.$currentFiles.pipe(takeUntil(this.destroyed)).subscribe((value) => {\n      this.logger.log(\"um.$currentFiles\", { value });\n      this.writeValue(value);\n    });\n  }\n\n  get isMultiple() {\n    return this.config && this.config.maxFiles !== 1;\n  }\n\n  get maxReached() {\n    return (\n      this.config &&\n      this.config.maxFiles &&\n      this.value &&\n      this.config.maxFiles === this.value.length\n    );\n  }\n\n  async clickRemoveTag(fileObject: FormFileObject) {\n    this.um.clickRemoveTag(fileObject);\n  }\n\n  onFileInputChange(event) {\n    const files = event.target.files;\n    this.um.onFileInputChange(files);\n  }\n\n  onFileDrop(event) {\n    event.preventDefault();\n    if (this.maxReached || this.disabled) {\n      return;\n    }\n    const files = event.dataTransfer.files;\n    this.um.onFileInputChange(files);\n  }\n}\n","import {\n  Component,\n  forwardRef,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { FormFileObject } from '../FormFileObject';\nimport { Subject } from 'rxjs';\nimport { takeUntil, map, tap } from 'rxjs/operators';\nimport { FormBase } from '../form-base-class';\nimport { NotificationService } from '../utils/notification.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PreviewImagePopupComponent } from '../subcomponents/preview-images/components/preview-image-popup.component';\nimport { UploadsManager } from '../firebase/uploads-manager';\nimport { FormFirebaseImageConfiguration } from '../FormFirebaseFileConfiguration';\nimport { SimpleLogger } from '../utils/simple-logger';\n\n@Component({\n  // tslint:disable-next-line: component-selector\n  selector: 'form-firebase-image',\n  template: `\n    <div class=\"container\">\n      <span class=\"placeholder\">{{ placeholder }}</span>\n      <label\n        class=\"custom-file-upload\"\n        [class.dragover]=\"!disabled && isDraggingOnTop\"\n        (dragover)=\"isDraggingOnTop = true; $event.preventDefault()\"\n        (dragleave)=\"isDraggingOnTop = false\"\n        (drop)=\"isDraggingOnTop = false; onFileDrop($event)\"\n      >\n        <input\n          [hidden]=\"true\"\n          placeholder=\"placeholder\"\n          type=\"file\"\n          [disabled]=\"disabled\"\n          (change)=\"onFileInputChange($event)\"\n          accept=\"image/*\"\n        />\n        <p class=\"upload-message\">{{ uploadMessage }}</p>\n        <div\n          class=\"flex-h max-width justify-around\"\n          *ngIf=\"value?.imageurl as imageurl\"\n        >\n          <div *ngIf=\"!hasLoaded && !hasError\">\n            <div class=\"margin10\">\n              <mat-progress-spinner [diameter]=\"90\" mode=\"indeterminate\">\n              </mat-progress-spinner>\n            </div>\n          </div>\n          <div class=\"relative\" [hidden]=\"!hasLoaded && !hasError\">\n            <button\n              mat-mini-fab\n              color=\"secondary\"\n              class=\"close-btn\"\n              [disabled]=\"disabled\"\n              (click)=\"clickReplaceTag(value)\"\n              matTooltip=\"Click to replace current image\"\n            >\n              <mat-icon>\n                swap_horiz\n              </mat-icon>\n            </button>\n            <button\n              mat-mini-fab\n              color=\"secondary\"\n              class=\"remove-btn\"\n              [disabled]=\"disabled\"\n              (click)=\"clickRemoveTag()\"\n              matTooltip=\"Click to remove image\"\n            >\n              <mat-icon>\n                delete\n              </mat-icon>\n            </button>\n            <img\n              #img\n              class=\"file-thumb has-pointer smart-rotate\"\n              matTooltip=\"Click to preview image\"\n              (click)=\"onImageClicked($event, imageurl)\"\n              [src]=\"imageurl\"\n              (load)=\"hasLoaded = true\"\n              (error)=\"hasError = true\"\n            />\n          </div>\n        </div>\n        <div\n          class=\"full-width\"\n          *ngIf=\"(this.uploadStatusChanged | async) == true && value\"\n        >\n          <mat-progress-bar\n            class=\"progress\"\n            mode=\"determinate\"\n            [value]=\"value?.value?.props?.progress\"\n          ></mat-progress-bar>\n        </div>\n      </label>\n    </div>\n  `,\n  styles: [\n    `\n      .smart-rotate {\n        image-orientation: from-image;\n      }\n      .relative {\n        position: relative;\n      }\n      .container {\n        display: flex;\n        flex-direction: column;\n        position: relative;\n      }\n      .placeholder {\n        color: grey;\n        margin-bottom: 5px;\n      }\n      .upload-message {\n        font-size: 1.5em;\n        margin-top: 0;\n        margin-bottom: 10px;\n        text-align: center;\n        color: #777;\n        cursor: pointer;\n      }\n      .remove-btn {\n        position: absolute;\n        right: 50px;\n        top: 5px;\n      }\n      .close-btn {\n        position: absolute;\n        right: 5px;\n        top: 5px;\n      }\n      .custom-file-upload {\n        display: inline-block;\n        border: 4px dashed #ccc;\n        background: transparent;\n        padding: 10px;\n        cursor: pointer;\n        width: calc(100% - 8px - 20px);\n        min-height: 200px;\n      }\n      .dragover {\n        background: #ddd;\n      }\n      .justify-around {\n        justify-content: space-around;\n      }\n      .flex-h {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n      }\n      .has-pointer {\n        cursor: pointer;\n      }\n      .file-thumb {\n        width: auto;\n        max-height: 250px;\n        max-width: 100%;\n      }\n    `\n  ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FormFirebaseImageComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FormFirebaseImageComponent),\n      multi: true\n    }\n  ]\n})\nexport class FormFirebaseImageComponent extends FormBase<FormFileObject> {\n  @Input()\n  placeholder = 'Attached Files';\n  @Input()\n  uploadMessage = 'Upload an Image Here';\n  private _config: FormFirebaseImageConfiguration;\n  @Input()\n  set config(config: FormFirebaseImageConfiguration) {\n    this._config = config || ({} as any);\n    this.initUploadManager();\n  }\n  get config() {\n    return this._config;\n  }\n  get isConfigLoaded(): boolean {\n    const c = this.config;\n    return !!c && !!c.directory && (!!c.firebaseApp || !!c.firebaseConfig);\n  }\n\n  // tslint:disable-next-line: no-output-on-prefix\n  @Output()\n  uploadStatusChanged = new EventEmitter<boolean>();\n\n  destroyed = new Subject();\n\n  isDraggingOnTop = false;\n\n  hasLoaded = false;\n  hasError = false;\n  private um: UploadsManager;\n\n  constructor(public ns: NotificationService, private dialog: MatDialog) {\n    super();\n    this.$ngdestroy.subscribe(() => this.destroyUploadManager());\n  }\n\n  writeValue(value) {\n    if (typeof value === 'object') {\n      this.value = value;\n    } else {\n      this.value = null;\n    }\n  }\n\n  destroyUploadManager() {\n    this.destroyed.next();\n    if (this.um) {\n      this.um.onDestroy();\n    }\n  }\n\n  initUploadManager() {\n    this.logger = new SimpleLogger(this.debug, '[form-firebase-image]');\n    this.destroyUploadManager();\n    const $internalChangesTap = this.internalControl.valueChanges.pipe(\n      takeUntil(this.destroyed),\n      tap(files => this.logger.log('$internalChangesTap', {files})),\n      map(file => [file])\n    );\n    this.um = new UploadsManager(\n      this.config,\n      this.ns,\n      this.uploadStatusChanged,\n      $internalChangesTap,\n      [this.value],\n      this.logger\n    );\n    this.um.$currentFiles.pipe(takeUntil(this.destroyed)).subscribe(vals => {\n      if (Array.isArray(vals)) {\n        this.value = [...vals].pop();\n      }\n    });\n  }\n\n  onImageClicked($event, imageurl: string) {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.dialog.open(PreviewImagePopupComponent, {\n      data: imageurl,\n      hasBackdrop: true,\n      disableClose: false\n    });\n  }\n\n  async clickReplaceTag(fileObject: FormFileObject) {\n    this.value = null;\n    this.hasError = false;\n    this.hasLoaded = false;\n    this.um.clickRemoveTag(fileObject);\n  }\n\n  async clickRemoveTag() {\n    this.disabled = true;\n    setTimeout(() =>{\n      this.disabled = false;\n    }, 100);\n    this.value = null;\n  }\n\n  onFileInputChange(event) {\n    const files = event.target.files;\n    this.hasLoaded = false;\n    this.hasError = false;\n    this.um.onFileInputChange(files);\n  }\n\n  onFileDrop(event) {\n    event.preventDefault();\n    if (this.disabled) {\n      return;\n    }\n    const files = event.dataTransfer.files;\n    this.hasLoaded = false;\n    this.hasError = false;\n    this.um.onFileInputChange(files);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  MatInputModule,\n  MatIconModule,\n  MatProgressBarModule,\n  MatSnackBarModule,\n  MatDialogModule,\n  MatProgressSpinnerModule,\n  MatButtonModule,\n  MatTooltipModule\n} from '../material-imports';\nimport { CommonModule } from '@angular/common';\nimport { NotificationService } from './utils/notification.service';\nimport { FormFileUploadedFileListComponent } from './subcomponents/form-file-uploader-list.component';\nimport { FormFirebaseImageComponent } from './form-controls/form-firebase-image.component';\nimport { FormFirebaseFilesComponent } from './form-controls/form-firebase-files.component';\nimport { FormFirebaseFilesViewerComponent } from './subcomponents/form-firebase-files-viewer.component';\nimport { FormFirebaseFileComponent } from './form-controls/form-firebase-file.component';\nimport { LibPreviewImagesModule } from './subcomponents/preview-images/lib-preview-images.module';\n\nconst shared = [\n  FormFirebaseFilesComponent,\n  FormFirebaseFileComponent,\n  FormFirebaseImageComponent,\n  FormFirebaseFilesViewerComponent,\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatDialogModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatSnackBarModule,\n    MatInputModule,\n    MatIconModule,\n    LibPreviewImagesModule\n  ],\n  exports: [...shared, LibPreviewImagesModule],\n  declarations: [FormFileUploadedFileListComponent, ...shared],\n  providers: [NotificationService]\n})\nexport class MatFirebaseUploadModule {}\n","import { EventEmitter, Component, Input, Output } from '@angular/core';\nimport { FormFileObject } from '../FormFileObject';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PreviewImagePopupComponent } from './preview-images/components/preview-image-popup.component';\n\n@Component({\n  selector: 'lib-uploaded-files-list',\n  template: `\n    <p *ngIf=\"uploadedFiles?.length\">{{placeholder}}</p>\n    <div>\n      <div *ngFor=\"let file of uploadedFiles\">\n        <div class=\"full-width flex-h justify-between\">\n          <div class=\"flex-h has-ellipsis\">\n            <mat-icon *ngIf=\"!disabled && isDone(file)\">done</mat-icon>\n            <a class=\"flex-h has-ellipsis\" [href]=\"file.id\" target=\"_blank\">\n              <img class=\"file-icon smart-rotate\" image [src]=\"file['fileicon']\" />\n              <span class=\"has-ellipsis\">{{ file.value.name }}</span>\n              <mat-icon class=\"i-open\">open_in_new</mat-icon>\n            </a>\n          </div>\n          <div class=\"flex-h\">\n            <div class=\"flex-h\" *ngIf=\"file['imageurl'] as imageurl\">\n              <div\n                class=\"full-width\"\n                *ngIf=\"!img.hasLoaded && !img.hasError\"\n              >\n                <div class=\"margin10\">\n                  <mat-progress-spinner [diameter]=\"30\" mode=\"indeterminate\">\n                  </mat-progress-spinner>\n                </div>\n              </div>\n              <img\n                #img\n                class=\"file-thumb has-pointer smart-rotate\"\n                matTooltip=\"Click to preview image\"\n                (click)=\"clickedImage(imageurl)\"\n                [src]=\"imageurl\"\n                [hidden]=\"!img.hasLoaded && !img.hasError\"\n                (load)=\"img.hasLoaded = true\"\n                (error)=\"img.hasError = true\"\n              />\n            </div>\n            <mat-icon\n              *ngIf=\"!disabled\"\n              class=\"has-pointer\"\n              (click)=\"this.clickRemoveTag.emit(file)\"\n              >cancel</mat-icon\n            >\n          </div>\n        </div>\n        <div class=\"full-width\">\n          <mat-progress-bar\n            class=\"progress\"\n            mode=\"determinate\"\n            [value]=\"getProgress(file)\"\n          ></mat-progress-bar>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .smart-rotate {\n        image-orientation: from-image;\n      }\n      .full-width {\n        width: 100%;\n      }\n      .flex-h {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n      }\n      .justify-between {\n        justify-content: space-between;\n      }\n      .has-pointer {\n        cursor: pointer;\n      }\n      .file-link {\n        display: flex;\n        align-items: center;\n      }\n      .file-thumb,\n      .file-icon {\n        margin: 3px;\n        height: 30px;\n        width: auto;\n        max-width: 60px;\n      }\n      .file-thumb {\n        background-color: #ddd;\n      }\n      .i-open {\n        font-size: 1em;\n      }\n      .has-ellipsis {\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n      }\n    `\n  ]\n})\nexport class FormFileUploadedFileListComponent {\n  @Input()\n  placeholder = 'Uploaded Files:';\n  @Input()\n  disabled: boolean;\n  @Input()\n  uploadedFiles: FormFileObject[] = [];\n  @Output()\n  clickRemoveTag = new EventEmitter<FormFileObject>();\n\n  constructor(private dialog: MatDialog) {}\n\n  clickedImage(imageurl: string) {\n    this.dialog.open(PreviewImagePopupComponent, {\n      data: imageurl,\n      hasBackdrop: true,\n      disableClose: false\n    });\n  }\n\n  getProgress(file: FormFileObject) {\n    const isDone = this.isDone(file);\n    if (isDone) {\n      return 100;\n    }\n    if (file && file.value && file.value.props) {\n      const p = file.value.props.progress;\n      return p * 0.95; // 95% until download completed\n    }\n    return 100;\n  }\n\n  isDone(file: FormFileObject): boolean {\n    if (file && file.value && file.value.props) {\n      const isCompleted =\n        file.value.props.completed || file.value.props.progress === 100;\n      return isCompleted;\n    }\n    return false;\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { FormFileObject } from '../FormFileObject';\n\n@Component({\n  selector: 'form-firebase-files-viewer',\n  template: `\n    <ng-template #noFiles>\n      <h4 class=\"no-files\">\n        {{ placeholder }}\n      </h4>\n    </ng-template>\n    <lib-uploaded-files-list\n      *ngIf=\"value?.length; else noFiles\"\n      [disabled]=\"true\"\n      [uploadedFiles]=\"value\"\n    >\n    </lib-uploaded-files-list>\n  `,\n  styles: [\n    `\n      .no-files {\n        color: grey;\n        text-align: center;\n      }\n    `\n  ]\n})\nexport class FormFirebaseFilesViewerComponent {\n  @Input()\n  value: FormFileObject[];\n  @Input()\n  placeholder = 'No Files...';\n}\n","import { Component, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PreviewImagePopupComponent } from './preview-image-popup.component';\n\n@Component({\n  selector: 'img-with-loader',\n  template: `\n    <div\n      class=\"container\"\n      [ngStyle]=\"{ 'padding-bottom': aspectRatio * 100 + '%' }\"\n      [class.height-auto]=\"!hasLoaded\"\n    >\n      <div class=\"full-width justify bg-grey\" *ngIf=\"!hasLoaded\">\n        <div class=\"margin10\">\n          <mat-progress-spinner [diameter]=\"80\" mode=\"indeterminate\">\n          </mat-progress-spinner>\n        </div>\n      </div>\n      <img\n        image\n        #img\n        class=\"image-fit has-pointer smart-rotate\"\n        [hidden]=\"!hasLoaded && !hasError\"\n        (click)=\"clickedImage(src)\"\n        [src]=\"src\"\n        (load)=\"onLoaded(img); hasLoaded = true\"\n        (error)=\"hasError = true\"\n      />\n    </div>\n  `,\n  styles: [\n    `\n      .smart-rotate {\n        image-orientation: from-image;\n      }\n      .bg-grey {\n        background-color: #dddddd78;\n      }\n      .justify {\n        display: flex;\n        justify-content: center;\n      }\n      .full-width {\n        width: 100%;\n      }\n      .margin10 {\n        margin: 50px;\n      }\n      .container {\n        position: relative;\n        height: 0;\n      }\n      .image-fit {\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 100%;\n        width: 100%;\n        object-fit: cover;\n        object-position: center center;\n      }\n      .height-auto {\n        height: auto;\n      }\n      .has-pointer {\n        cursor: pointer;\n      }\n      :host {\n        display: block;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    `\n  ]\n})\nexport class LibImgWithLoaderComponent {\n  hasLoaded = false;\n  hasError = false;\n\n  aspectRatio = 0;\n\n  // tslint:disable-next-line: variable-name\n  private _src: string;\n  @Input()\n  set src(src: string) {\n    this.hasError = false;\n    this.hasLoaded = false;\n    this._src = src;\n  }\n  get src() {\n    return this._src;\n  }\n\n  constructor(private dialog: MatDialog) {}\n\n  clickedImage(imageurl: string) {\n    this.dialog.open(PreviewImagePopupComponent, {\n      data: imageurl,\n      hasBackdrop: true,\n      disableClose: false\n    });\n  }\n\n  onLoaded(img: HTMLImageElement) {\n    console.log({ img });\n    const { naturalHeight, naturalWidth } = img;\n    this.aspectRatio = naturalHeight / naturalWidth;\n  }\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'preview-gallery',\n  template: `\n    <div class=\"gallery\">\n      <div class=\"gallery-item\" *ngFor=\"let url of imageUrls\">\n        <preview-image [src]=\"url\" [aspectRatio]=\"1\"> </preview-image>\n      </div>\n    </div>\n  `,\n  styles: [\n    `\n      .gallery {\n        display: flex;\n      }\n      .gallery-item {\n        margin-right: 15px;\n        margin-top: 15px;\n        width: 100px;\n      }\n    `\n  ]\n})\nexport class PreviewGalleryComponent {\n  _imageUrls: string[];\n  @Input()\n  set imageUrls(imageUrls: string[]) {\n    if (imageUrls) {\n      this._imageUrls = imageUrls;\n    } else {\n      this._imageUrls = ['https://via.placeholder.com/100x100'];\n    }\n  }\n  get imageUrls() {\n    return this._imageUrls;\n  }\n  @Input()\n  aspectRatio = 1;\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\n@Component({\n  selector: 'preview-image-popup',\n  template: `\n    <div class=\"relative\">\n      <button class=\"absolute z1 btn-close\" mat-mini-fab (click)=\"onCancel()\">\n        <mat-icon>clear</mat-icon>\n      </button>\n      <a\n        class=\"absolute z1 btn-download\"\n        mat-mini-fab\n        target=\"_blank\"\n        [href]=\"imageSrc\"\n      >\n        <mat-icon>open_in_new</mat-icon>\n      </a>\n      <div\n        class=\"justify bg-grey\"\n        *ngIf=\"!img.hasLoaded && !img.hasError\"\n      >\n        <div class=\"margin10\">\n          <mat-progress-spinner [diameter]=\"90\" mode=\"indeterminate\">\n          </mat-progress-spinner>\n        </div>\n      </div>\n      <img\n        #img\n        class=\"fill smart-rotate\"\n        [src]=\"imageSrc\"\n        [hidden]=\"!img.hasLoaded && !img.hasError\"\n        (load)=\"img.hasLoaded = true\"\n        (error)=\"img.hasError = true\"\n      />\n    </div>\n  `,\n  styles: [\n    `\n      .smart-rotate {\n        image-orientation: from-image;\n      }\n      .z1 {\n        z-index: 1;\n      }\n      .relative {\n        position: relative;\n      }\n      .absolute {\n        position: absolute;\n      }\n      .btn-close {\n        right: 10px;\n        top: 10px;\n      }\n      .btn-download {\n        right: 10px;\n        bottom: 10px;\n      }\n      .bg-grey {\n        background-color: #dddddd78;\n      }\n      .margin10 {\n        margin: 70px;\n      }\n      .justify {\n        display: flex;\n        justify-content: center;\n      }\n      .fill {\n        max-height: 90vh;\n        max-width: 100%;\n      }\n    `\n  ]\n})\nexport class PreviewImagePopupComponent {\n  constructor(\n    public dialogRef: MatDialogRef<PreviewImagePopupComponent>,\n    @Inject(MAT_DIALOG_DATA) public imageSrc: string\n  ) {}\n\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PreviewImagePopupComponent } from './preview-image-popup.component';\n\n@Component({\n  selector: 'preview-image',\n  template: `\n    <div class=\"outer\">\n      <div\n        class=\"outer-before\"\n        [style.paddingTop]=\"\n          sanitizer.bypassSecurityTrustStyle(\n            'calc(1/(' + aspectRatio + ') * 100%)'\n          )\n        \"\n      ></div>\n      <div\n        class=\"inner has-pointer\"\n        [style.backgroundImage]=\"'url(' + src + ')'\"\n        [style.backgroundSize]=\"'cover'\"\n        (click)=\"clickedImage()\"\n      ></div>\n    </div>\n  `,\n  styles: [\n    `\n      /* made with: https://ratiobuddy.com/ */\n      .outer {\n        position: relative;\n      }\n      .outer-before {\n        display: block;\n        content: '';\n        width: 100%;\n        padding-top: 50%; /* default aspect ratio */\n      }\n      .outer > .inner {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        overflow: hidden;\n      }\n      .has-pointer {\n        cursor: pointer;\n      }\n\n      img {\n        width: 100%;\n      }\n    `\n  ]\n})\nexport class PreviewImageComponent {\n  _src: string;\n  @Input()\n  set src(src: string) {\n    if (src) {\n      this._src = src;\n    } else {\n      this._src = 'https://via.placeholder.com/200x100';\n    }\n  }\n  get src() {\n    return this._src;\n  }\n  @Input()\n  aspectRatio = 1;\n\n  constructor(public sanitizer: DomSanitizer, private dialog: MatDialog) {}\n\n  async clickedImage() {\n    const ref = this.dialog.open(PreviewImagePopupComponent, {\n      hasBackdrop: true,\n      data: this.src\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PreviewImageComponent } from './components/preview-image.component';\nimport { PreviewGalleryComponent } from './components/preview-gallery.component';\nimport {\n  MatDialogModule,\n  MatButtonModule,\n  MatIconModule,\n  MatProgressSpinnerModule\n} from '../../../material-imports';\nimport { PreviewImagePopupComponent } from './components/preview-image-popup.component';\nimport { LibImgWithLoaderComponent } from './components/img-with-loader.component';\n\nconst exportedComponents = [\n  PreviewImageComponent,\n  PreviewGalleryComponent,\n  LibImgWithLoaderComponent\n];\n\n@NgModule({\n  entryComponents: [PreviewImagePopupComponent],\n  declarations: [...exportedComponents, PreviewImagePopupComponent],\n  exports: [...exportedComponents],\n  imports: [\n    CommonModule,\n    MatDialogModule,\n    MatButtonModule,\n    MatProgressSpinnerModule,\n    MatIconModule\n  ]\n})\nexport class LibPreviewImagesModule {}\n","export function ConvertToTitleCase(input: string): string {\n  const capitalsWithSpaces = input.replace(/([A-Z])/g, ' $1').trim();\n  const underscoresToSpaces = capitalsWithSpaces.replace(/_/g, ' ');\n  return underscoresToSpaces\n    .split(' ')\n    .map(p => p.charAt(0).toUpperCase() + p.substr(1).toLowerCase())\n    .join(' ');\n}\n","export interface FileIcon {\n  /**\n   * Name of the icon, e.g. 'javascript'\n   */\n  name: string;\n\n  /**\n   * Define the file extensions that should use this icon.\n   * E.g. ['js']\n   */\n  fileExtensions?: string[];\n\n  /**\n   * Define if there are some static file names that should apply this icon.\n   * E.g. ['sample.js']\n   */\n  fileNames?: string[];\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n\n  /**\n   * Define if the icon should be disabled.\n   */\n  disabled?: boolean;\n}\n\nexport interface FolderTheme {\n  /**\n   * Name of the theme\n   */\n  name: string;\n\n  /**\n   * Define the default icon for folders in a theme.\n   */\n  defaultIcon: DefaultIcon;\n\n  /**\n   * Icon for root folders.\n   */\n  rootFolder?: DefaultIcon;\n\n  /**\n   * Defines folder icons for specific folder names.\n   */\n  icons?: FolderIcon[];\n}\n\nexport interface FolderIcon {\n  /**\n   * Name of the icon, e.g. 'src'\n   */\n  name: string;\n\n  /**\n   * Define the folder names that should apply the icon.\n   * E.g. ['src', 'source']\n   */\n  folderNames: string[];\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n\n  /**\n   * Define if the icon should be disabled.\n   */\n  disabled?: boolean;\n}\n\nexport interface DefaultIcon {\n  /**\n   * Name of the icon, e.g. 'src'\n   */\n  name: string;\n\n  /**\n   * Define if there is a light icon available.\n   */\n  light?: boolean;\n\n  /**\n   * Define if there is a high contrast icon available.\n   */\n  highContrast?: boolean;\n}\n\nexport class FileIcons {\n  /**\n   * Define the default icon for files.\n   */\n  defaultIcon: DefaultIcon;\n\n  /**\n   * Defines all folder icons.\n   */\n  icons?: FileIcon[];\n}\n\nexport const fileIcons: FileIcons = {\n  defaultIcon: { name: 'file' },\n  icons: [\n    { name: 'word', fileExtensions: ['doc', 'docx', 'rtf'] },\n    { name: 'pdf', fileExtensions: ['pdf'] },\n    { name: 'table', fileExtensions: ['xlsx', 'xls', 'csv', 'tsv'] },\n    {\n      name: 'html',\n      fileExtensions: ['html', 'htm', 'xhtml', 'html_vm', 'asp']\n    },\n    {\n      name: 'markdown',\n      fileExtensions: ['md', 'markdown', 'rst']\n    },\n    { name: 'yaml', fileExtensions: ['yaml', 'YAML-tmLanguage', 'yml'] },\n    {\n      name: 'xml',\n      fileExtensions: [\n        'xml',\n        'plist',\n        'xsd',\n        'dtd',\n        'xsl',\n        'xslt',\n        'resx',\n        'iml',\n        'xquery',\n        'tmLanguage',\n        'manifest',\n        'project'\n      ],\n      fileNames: ['.htaccess']\n    },\n    {\n      name: 'image',\n      fileExtensions: [\n        'png',\n        'jpeg',\n        'jpg',\n        'gif',\n        'svg',\n        'ico',\n        'tif',\n        'tiff',\n        'psd',\n        'psb',\n        'ami',\n        'apx',\n        'bmp',\n        'bpg',\n        'brk',\n        'cur',\n        'dds',\n        'dng',\n        'exr',\n        'fpx',\n        'gbr',\n        'img',\n        'jbig2',\n        'jb2',\n        'jng',\n        'jxr',\n        'pbm',\n        'pgf',\n        'pic',\n        'raw',\n        'webp',\n        'eps'\n      ]\n    },\n    { name: 'tex', fileExtensions: ['tex', 'cls', 'sty'] },\n    {\n      name: 'powerpoint',\n      fileExtensions: [\n        'pptx',\n        'ppt',\n        'pptm',\n        'potx',\n        'potm',\n        'ppsx',\n        'ppsm',\n        'pps',\n        'ppam',\n        'ppa'\n      ]\n    },\n    {\n      name: 'video',\n      fileExtensions: [\n        'webm',\n        'mkv',\n        'flv',\n        'vob',\n        'ogv',\n        'ogg',\n        'gifv',\n        'avi',\n        'mov',\n        'qt',\n        'wmv',\n        'yuv',\n        'rm',\n        'rmvb',\n        'mp4',\n        'm4v',\n        'mpg',\n        'mp2',\n        'mpeg',\n        'mpe',\n        'mpv',\n        'm2v'\n      ]\n    },\n    { name: 'audio', fileExtensions: ['mp3', 'flac', 'm4a', 'wma', 'aiff'] },\n    { name: 'document', fileExtensions: ['txt'] }\n  ]\n};\n\nexport const getFileIconName = (filename: string) => {\n  filename = filename.toLowerCase();\n  if (!filename || !filename.includes('.')) {\n    return fileIcons.defaultIcon.name;\n  }\n  const ext = getFileExtension(filename);\n  const matchesExt = fileIcons.icons.filter(\n    x => !!x.fileExtensions && !!x.fileExtensions.filter(y => y === ext).length\n  );\n  const matchesFilename = fileIcons.icons.filter(\n    x => !!x.fileNames && !!x.fileNames.filter(y => y === filename).length\n  );\n  if (!!matchesFilename.length) {\n    return matchesFilename[0].name;\n  } else if (!!matchesExt.length) {\n    return matchesExt[0].name;\n  }\n\n  return fileIcons.defaultIcon.name;\n};\n\nexport const isFileImage = (filename: string) =>\n  getFileIconName(filename) === 'image';\n\nexport const getFileExtension = (filename: string) => filename.split('.').pop();\n\nexport const getFileName = (filename: string) =>\n  filename.split('.').slice(-2, -1)[0];\n\nexport const getFileIcon = (filename: string) => {\n  return '/assets/fileicons/' + getFileIconName(filename) + '.svg';\n};\n","\n// **blob to dataURL**\nexport async function blobToDataURL(blob): Promise<string> {\n  const reader = new FileReader();\n  return new Promise<string>((resolve, reject) => {\n    reader.onload = function(e: any) {\n      resolve(e.target.result as string);\n    };\n    reader.onerror = function(error: any) {\n      reject(error);\n    };\n    reader.readAsDataURL(blob);\n  });\n}\n\n// Dataurl to blob\nexport function dataURItoBlob(dataURI) {\n  // convert base64 to raw binary data held in a string\n  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n  const byteString = atob(dataURI.split(',')[1]);\n\n  // separate out the mime component\n  const mimeString = dataURI\n    .split(',')[0]\n    .split(':')[1]\n    .split(';')[0];\n\n  // write the bytes of the string to an ArrayBuffer\n  const ab = new ArrayBuffer(byteString.length);\n\n  // create a view into the buffer\n  const ia = new Uint8Array(ab);\n\n  // set the bytes of the buffer to the correct values\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  // write the ArrayBuffer to a blob, and you're done\n  const blob = new Blob([ab], { type: mimeString });\n  return blob;\n}\n\n// Take an image URL, downscale it to the given width, and return a new image URL.\nexport async function downscaleImage(\n  dataUrl: string,\n  newWidth: number,\n  imageQuality: number,\n  imageType: string,\n  debug?: boolean\n) {\n  // Provide default values\n  imageType = imageType || 'image/jpeg';\n  imageQuality = imageQuality || 0.7;\n\n  // Create a temporary image so that we can compute the height of the downscaled image.\n  const image = new Image();\n  image.src = dataUrl;\n  await new Promise(resolve => {\n    image.onload = () => {\n      resolve();\n    };\n  });\n  const oldWidth = image.width;\n  const oldHeight = image.height;\n  const newHeight = Math.floor((oldHeight / oldWidth) * newWidth);\n\n  // Create a temporary canvas to draw the downscaled image on.\n  const canvas = document.createElement('canvas');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n\n  // Draw the downscaled image on the canvas and return the new data URL.\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, newWidth, newHeight);\n  const newDataUrl = canvas.toDataURL(imageType, imageQuality);\n  if (debug) {\n    console.log('quill.imageCompressor: downscaling image...', {\n      args: {\n        dataUrl,\n        newWidth,\n        imageType,\n        imageQuality\n      },\n      image,\n      oldWidth,\n      oldHeight,\n      newHeight,\n      canvas,\n      ctx,\n      newDataUrl\n    });\n  }\n  return newDataUrl;\n}\n","export * from './case-helper';\nexport * from './file-icon.helper';\nexport * from './img-helpers';\nexport * from './notification.service';\nexport * from './path-helpers';\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Injectable()\nexport class NotificationService {\n  constructor(private matSnackbar: MatSnackBar) {}\n\n  public notify(msg: string, title?: string, isError?: boolean) {\n    return this.matSnackbar.open(msg, title, {\n      duration: 4000,\n      horizontalPosition: 'center',\n      verticalPosition: 'bottom'\n    });\n  }\n\n  public notifyCancelled() {\n    return this.notify('Cancelled Operation');\n  }\n}\n","export function TrimSlashes(inputPath: string): string {\n  return inputPath.replace(/^\\/+|\\/+$/g, '');\n}\n","export class SimpleLogger {\n  constructor(\n    private debug: boolean,\n    private logPrefix: string = 'simple-logger:: '\n  ) {}\n\n  public get log() {\n    if (!this.debug) {\n      return (...any) => {};\n    }\n    const boundLogFn: (...any) => void = console.log.bind(\n      console,\n      this.logPrefix\n    );\n    return boundLogFn;\n  }\n\n  public get error() {\n    if (!this.debug) {\n      return (...any) => {};\n    }\n    const bounderrorFn: (...any) => void = console.error.bind(\n      console,\n      this.logPrefix\n    );\n    return bounderrorFn;\n  }\n\n  public get warn() {\n    if (!this.debug) {\n      return (...any) => {};\n    }\n    const boundLogFn: (...any) => void = console.warn.bind(\n      console,\n      this.logPrefix\n    );\n    return boundLogFn;\n  }\n}\n","import { MatInputModule } from \"@angular/material/input\"\nimport { MatIconModule } from \"@angular/material/icon\"\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\"\nimport { MatSnackBarModule } from \"@angular/material/snack-bar\"\nimport { MatDialogModule } from \"@angular/material/dialog\"\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\"\nimport { MatButtonModule } from \"@angular/material/button\"\nimport { MatTooltipModule } from \"@angular/material/tooltip\"\n\nexport {\n  MatInputModule,\n  MatIconModule,\n  MatProgressBarModule,\n  MatSnackBarModule,\n  MatDialogModule,\n  MatProgressSpinnerModule,\n  MatButtonModule,\n  MatTooltipModule\n}\n","/*\n * Public API Surface of mat-firebase-upload\n */\n\nexport * from './lib/lib.module';\nexport * from './lib/form-controls/form-firebase-file.component';\nexport * from './lib/form-controls/form-firebase-files.component';\nexport * from './lib/form-controls/form-firebase-image.component';\nexport * from './lib/FormFileObject';\nexport * from './lib/FormFirebaseFileConfiguration';\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\nimport { allRoutes } from './app.routing';\n\n@Component({\n  selector: 'app-root',\n  template: `\n    <!--The content below is only a placeholder and can be replaced.-->\n    <h2>Mat-Firebase-Upload Demo</h2>\n    <mat-drawer-container style=\"height: 90vh;\">\n      <mat-drawer mode=\"side\" opened>\n        <nav>\n          <a\n            *ngFor=\"let linkItem of linkItems\"\n            [routerLink]=\"['/' + linkItem.path]\"\n            routerLinkActive=\"active\"\n            #rla=\"routerLinkActive\"\n            [routerLinkActiveOptions]=\"{ exact: true }\"\n          >\n            {{ linkItem.path }}\n          </a>\n        </nav>\n      </mat-drawer>\n      <mat-drawer-content>\n        <div style=\"padding: 10px;\">\n          <router-outlet></router-outlet>\n        </div>\n      </mat-drawer-content>\n    </mat-drawer-container>\n  `,\n  styles: [\n    `\n      nav {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        overflow: hidden;\n        width: 250px;\n      }\n      nav a,\n      nav a:visited {\n        text-decoration: none;\n        color: black;\n      }\n      nav a {\n        padding: 8px;\n        width: 100%;\n        font-family: sans-serif;\n      }\n      .active {\n        font-weight: bold;\n        border-bottom: 1px solid red;\n      }\n    `,\n  ],\n})\nexport class AppComponent {\n  linkItems = allRoutes;\n}\n","import { AppRoutingModule } from './app.routing';\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { NgModule } from \"@angular/core\";\n\nimport { AppComponent } from \"./app.component\";\nimport { CommonModule } from \"@angular/common\";\nimport { ReactiveFormsModule, FormsModule } from \"@angular/forms\";\n\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTabsModule } from \"@angular/material/tabs\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatSlideToggleModule } from \"@angular/material/slide-toggle\";\n\nimport { MatFirebaseUploadModule } from './from-lib';\n\nimport {\n  TestFormFilesComponent,\n  TestFormFileComponent,\n  TestFormImageComponent,\n  TestFormViewersComponent,\n} from \"./components\";\n\nconst entryComponents = [\n  TestFormFilesComponent,\n  TestFormFileComponent,\n  TestFormImageComponent,\n  TestFormViewersComponent,\n];\n\n@NgModule({\n  declarations: [AppComponent, ...entryComponents],\n  entryComponents: [...entryComponents],\n  imports: [\n    AppRoutingModule,\n    BrowserModule,\n    BrowserAnimationsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    MatFirebaseUploadModule,\n    MatTabsModule,\n    MatSidenavModule,\n    MatButtonModule,\n    MatSlideToggleModule,\n    MatIconModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport {\n  TestFormFileComponent,\n  TestFormFilesComponent,\n  TestFormImageComponent,\n  TestFormViewersComponent,\n} from \"./components\";\n\nexport const allRoutes: Routes = [\n  { path: \"form-firebase-file\", component: TestFormFileComponent },\n  { path: \"form-firebase-files\", component: TestFormFilesComponent },\n  { path: \"form-firebase-image\", component: TestFormImageComponent },\n  { path: \"form-firebase-viewers\", component: TestFormViewersComponent },\n  { path: \"**\", redirectTo: \"form-firebase-file\" }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(allRoutes)],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","\nimport { environment } from '../../environments/environment';\nimport { FormFileObject, FormFirebaseConfigurationBase } from '../from-lib';\n\nexport function blankFile(url: string): FormFileObject {\n  return {\n    id: url,\n    fileicon: '/assets/fileicons/image.svg',\n    imageurl: url,\n    bucket_path: '',\n    value: {\n      name:\n        'imageimageimageimageimageimageimageimageimageimageimageimageimage.jpeg',\n      props: {\n        thumb: '',\n        fileicon: '',\n        progress: 100,\n        completed: true\n      }\n    }\n  };\n}\n\nexport function blankFile2(): FormFileObject {\n  return blankFile('https://i.imgur.com/HSdYMMN.jpg');\n}\n\nexport async function makeConfig(ms?: number) {\n  if (ms) {\n    await delay(ms);\n  }\n  const config: FormFirebaseConfigurationBase = {\n    directory: `audits/somelocation`,\n    firebaseConfig: environment.firebaseConfig,\n    useUuidName: true,\n    acceptedFiles: 'application/pdf,image/*',\n    imageCompressionMaxSize: 1600,\n    imageCompressionQuality: 0.9\n  };\n  return config;\n}\n\nexport async function delay(ms: number) {\n  await new Promise(resolve => setTimeout(resolve, ms));\n}\n","export * from './test-form-file.component';\nexport * from './test-form-files.component';\nexport * from './test-form-image.component';\nexport * from './test-form-viewers.component';\nexport * from './file-factory';\n","import { Component, OnInit } from \"@angular/core\";\nimport { blankFile, makeConfig, delay } from \"./file-factory\";\nimport { FormControl } from \"@angular/forms\";\nimport { FormFirebaseFilesConfiguration } from '../from-lib';\n\n@Component({\n  template: `\n    <h2>File Uploader/Viewer Control</h2>\n    <div>\n      <h5>Control Enabled({{ enabledControl.value | json }})</h5>\n      <mat-slide-toggle [formControl]=\"enabledControl\"> </mat-slide-toggle>\n    </div>\n    <div class=\"container-2cols\">\n      <form-firebase-file\n        *ngIf=\"controlFile\"\n        [config]=\"config\"\n        [formControl]=\"controlFile\"\n        debug=\"true\"\n      >\n      </form-firebase-file>\n      <pre>{{ controlFile?.value | json }}</pre>\n    </div>\n  `\n})\nexport class TestFormFileComponent implements OnInit {\n  enabledControl = new FormControl(true);\n  controlFile = new FormControl(blankFile(\"https://i.imgur.com/uUL3zYD.jpg\"));\n  config: FormFirebaseFilesConfiguration;\n\n  constructor() {\n    this.enabledControl.valueChanges.subscribe(isEnabled => {\n      if (isEnabled) {\n        this.controlFile.enable();\n      } else {\n        this.controlFile.disable();\n      }\n    });\n  }\n\n  async ngOnInit() {\n    await delay(1000);\n    this.controlFile.setValue(blankFile(\"https://i.imgur.com/ioqsdHZ.jpeg\"))\n    this.config = await makeConfig(3000);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { blankFile, makeConfig } from './file-factory';\nimport { FormControl } from '@angular/forms';\nimport { FormFirebaseFilesConfiguration } from '../from-lib';\nimport { delay } from 'rxjs/operators';\n\n@Component({\n  template: `\n    <h2>Files Uploader/Viewer Control</h2>\n    <div>\n      <h5>Control Enabled({{ enabledControl.value | json }})</h5>\n      <mat-slide-toggle [formControl]=\"enabledControl\"> </mat-slide-toggle>\n    </div>\n    <div class=\"container-2cols\">\n      <form-firebase-files\n        [formControl]=\"controlFiles\"\n        [config]=\"config\"\n        debug=\"true\"\n      >\n      </form-firebase-files>\n      <pre>{{ controlFiles?.value | json }}</pre>\n    </div>\n  `\n})\nexport class TestFormFilesComponent implements OnInit {\n  enabledControl = new FormControl(true);\n  controlFiles = new FormControl([\n    blankFile('https://i.imgur.com/uUL3zYD.jpg'),\n    blankFile('https://i.imgur.com/HSdYMMN.jpg')\n  ]);\n  config: FormFirebaseFilesConfiguration;\n\n  constructor() {\n    this.enabledControl.valueChanges.subscribe(isEnabled => {\n      if (isEnabled) {\n        this.controlFiles.enable();\n      } else {\n        this.controlFiles.disable();\n      }\n    });\n  }\n\n  async ngOnInit() {\n    await delay(1000);\n    this.config = await makeConfig(2000);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { blankFile, makeConfig } from './file-factory';\nimport { FormControl } from '@angular/forms';\nimport { FormFirebaseFilesConfiguration } from '../from-lib';\n\n@Component({\n  template: `\n    <h2>File Uploader/Viewer Control</h2>\n    <div>\n      <h5>Control Enabled({{ enabledControl.value | json }})</h5>\n      <mat-slide-toggle [formControl]=\"enabledControl\"> </mat-slide-toggle>\n    </div>\n    <h2>Image Uploader/Viewer Control</h2>\n    <div class=\"container-2cols\">\n      <form-firebase-image\n        [formControl]=\"controlImage\"\n        [config]=\"config\"\n        debug=\"true\"\n      >\n      </form-firebase-image>\n      <pre>{{ controlImage?.value | json }}</pre>\n    </div>\n    <h2>Image Uploader/Viewer Control2</h2>\n    <div class=\"container-2cols\">\n      <form-firebase-image\n        [formControl]=\"controlImage2\"\n        [config]=\"config\"\n        debug=\"true\"\n      >\n      </form-firebase-image>\n      <pre>{{ controlImage2?.value | json }}</pre>\n    </div>\n  `\n})\nexport class TestFormImageComponent implements OnInit {\n  enabledControl = new FormControl(true);\n  controlImage = new FormControl(blankFile('https://i.imgur.com/uUL3zYD.jpg'));\n  controlImage2 = new FormControl(blankFile('https://i.imgur.com/HSdYMMN.jpg'));\n  config: FormFirebaseFilesConfiguration;\n\n  constructor() {\n    this.enabledControl.valueChanges.subscribe(isEnabled => {\n      if (isEnabled) {\n        this.controlImage.enable();\n        this.controlImage2.enable();\n      } else {\n        this.controlImage.disable();\n        this.controlImage2.disable();\n      }\n    });\n  }\n\n  async ngOnInit() {\n    this.config = await makeConfig();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { blankFile, makeConfig } from './file-factory';\nimport { FormControl } from '@angular/forms';\nimport { FormFirebaseFilesConfiguration } from '../from-lib';\n\n@Component({\n  template: `\n    <h2>File Uploader/Viewer Control</h2>\n    <div>\n      <h5>Control Enabled({{ enabledControl.value | json }})</h5>\n      <mat-slide-toggle [formControl]=\"enabledControl\"> </mat-slide-toggle>\n    </div>\n    <h2>Files Viewer Only</h2>\n    <div class=\"container-2cols\">\n      <form-firebase-files-viewer [value]=\"controlFiles.value\">\n      </form-firebase-files-viewer>\n      <pre>{{ controlFiles?.value | json }}</pre>\n    </div>\n    <h2>Image With Loader</h2>\n    <div class=\"container-2cols\">\n      <img-with-loader [src]=\"imgUrl\"></img-with-loader>\n      <pre>{{ imgUrl | json }}</pre>\n    </div>\n    <h2>Image Gallery</h2>\n    <div class=\"container-2cols\">\n      <preview-gallery [imageUrls]=\"imgUrls\"> </preview-gallery>\n      <pre>{{ imgUrls | json }}</pre>\n    </div>\n\n  `\n})\nexport class TestFormViewersComponent implements OnInit {\n  enabledControl = new FormControl(true);\n  config: FormFirebaseFilesConfiguration;\n\n  controlFiles = new FormControl([\n    blankFile('https://i.imgur.com/uUL3zYD.jpg'),\n    blankFile('https://i.imgur.com/HSdYMMN.jpg')\n  ]);\n  imgUrl = 'https://i.imgur.com/uUL3zYD.jpg';\n  imgUrls = [\n    'https://i.imgur.com/uUL3zYD.jpg',\n    'https://i.imgur.com/HSdYMMN.jpg'\n  ];\n\n  constructor() {\n    this.enabledControl.valueChanges.subscribe(isEnabled => {\n      if (isEnabled) {\n        this.controlFiles.enable();\n      } else {\n        this.controlFiles.disable();\n      }\n    });\n  }\n\n  async ngOnInit() {\n    this.config = await makeConfig();\n  }\n}\n","export * from '../../../mat-firebase-upload/src/public-api';\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  firebaseConfig: {\n    apiKey: 'AIzaSyBaaNXOsruNPyDrQpKEnw-S-BnvwKlTfR4',\n    authDomain: 'comm-unstable.firebaseapp.com',\n    databaseURL: 'https://comm-unstable.firebaseio.com',\n    projectId: 'comm-unstable',\n    storageBucket: 'comm-unstable.appspot.com',\n    messagingSenderId: '1061697142615',\n    appId: '1:1061697142615:web:23f9c7b10d97acfe'\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}